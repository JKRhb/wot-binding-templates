<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <script src='https://www.w3.org/Tools/respec/respec-w3c' class='remove'></script>
    <script class='remove'>
        var respecConfig = {
            specStatus: "ED",
            editors: [{
                name: "Klaus Hartke",
                w3cid: "107859",
                company: "Siemens AG",
                companyURL: "https://www.siemens.com/"
            }],
            edDraftURI: "https://w3c.github.io/wot-binding-templates/bindings/protocols/coap/",
            shortName: "wot-coap-binding",
            github: "https://github.com/w3c/wot-binding-templates/tree/main/bindings/protocols/coap",
        };
    </script>
    <title>CoAP Binding Template</title>
</head>

<body>
    <section id='abstract'>
        <p class="ednote">TODO: Provide a short overview of the document and the protocol binding features.</p>
    </section>
    <section id='introduction'>
        <h2>Introduction</h2>
        <p>
            The Constrained Application Protocol (CoAP) [[RFC7252]] is a
            specialized web transfer protocol for use with constrained nodes and
            constrained (e.g., low-power, lossy) networks. The nodes often have
            8-bit microcontrollers with small amounts of ROM and RAM, while
            constrained networks such as IPv6 over Low-Power Wireless Personal
            Area Networks (6LoWPANs) often have high packet error rates and a
            typical throughput of 10s of kbit/s. The protocol is designed for
            machine-to-machine (M2M) applications such as smart energy and
            building automation.
        </p>
        <p>
            This document describes how the Web of Things specification can be
            use to present devices that use the CoAP in a Thing Description. In
            particular, the document explain how to create valid Forms for the
            different operations that CoAP can perform.
        </p>
    </section>
    <section id='sotd'>
        <p>
            <em>This document is a work in progress</em>
        </p>
    </section>
    <section id="overview">
        <h2>Protocol Overview</h2>
        <p class="ednote">TODO: Provide an overview of the protocol and the protocol binding.</p>
        <table class="def">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Covered by</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Request to Server</td>
                    <td><code>"href": ..., "coap:method": ...</code></td>
                </tr>
                <tr>
                    <td>Request to Forward Proxy</td>
                    <td><code>"href": ..., "coap:method": ..., "coap:proxy": ...</code></td>
                </tr>
                <tr>
                    <td>Caching: Validation</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Conditional Requests</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Content</td>
                    <td><code>"coap:format": ...</code></td>
                </tr>
                <tr>
                    <td>Content Negotiation</td>
                    <td><code>"coap:accept": ...</code></td>
                </tr>
                <tr>
                    <td>Observing Resources</td>
                    <td><code>"subprotocol": "coap:observe"</code></td>
                </tr>
                <tr>
                    <td>Block-Wise Transfer</td>
                    <td><code>"coap:blockwise": { ... }</code></td>
                </tr>
                <tr>
                    <td>Quick Block-Wise Transfer</td>
                    <td><code>"coap:quickblockwise": { ... }</code></td>
                </tr>
                <tr>
                    <td>Hop Limit</td>
                    <td><code>"coap:hoplimit": ...</code></td>
                </tr>
                <!--
                <tr>
                    <td>OSCORE</td>
                    <td><code>SecurityScheme</code></td>
                </tr>
                <tr>
                    <td>EDHOC</td>
                    <td><code>SecurityScheme</code></td>
                </tr>
                -->
            </tbody>
        </table>
    </section>
    <section id="url">
        <h2>URI Schemes</h2>
        <p>
            CoAP uses the following URI schemes for identifying CoAP resources
            and providing a means of locating the resource:
        </p>
        <table class="def">
            <thead>
                <tr>
                    <th>URI Scheme</th>
                    <th>Reference</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>coap</td>
                    <td>[[RFC7252]]</td>
                </tr>
                <tr>
                    <td>coap+tcp</td>
                    <td>[[RFC8323]]</td>
                </tr>
                <tr>
                    <td>coap+ws</td>
                    <td>[[RFC8323]]</td>
                </tr>
                <tr>
                    <td>coaps</td>
                    <td>[[RFC7252]]</td>
                </tr>
                <tr>
                    <td>coaps+tcp</td>
                    <td>[[RFC8323]]</td>
                </tr>
                <tr>
                    <td>coaps+ws</td>
                    <td>[[RFC8323]]</td>
                </tr>
            </tbody>
        </table>
        <p>
            See <a href="https://www.iana.org/assignments/uri-schemes/">Uniform Resource Identifier (URI) Schemes</a>
            for the complete list of CoAP URI schemes.
        </p>
    </section>
    <section id="vocabulary">
        <h2>CoAP Vocabulary</h2>
        <p>
            This section describes the vocabulary used in CoAP. A protocol
            binding implementation should use the vocabulary defined in this
            section to describe the different configuration that can be used to
            exchanged data between Web of Things.
        </p>
        <section>
            <h3>Form terms</h3>
            <table class="def">
                <thead>
                    <tr>
                        <th>Vocabulary term</th>
                        <th>Description</th>
                        <th>Assignment</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>coap:method</code></td>
                        <td>Indicates the CoAP method to be used in the request</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#string"><code>string</code></a>
                            <p>
                                (see the
                                <a href="https://www.iana.org/assignments/core-parameters/#method-codes">CoAP Method Codes</a>
                                registry for the set of possible values)
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>coap:format</code></td>
                        <td>Indicates that a payload in one of the specified formats with a matching CoAP Content-Format option [[RFC7252]] be included in the request</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedShort"><code>unsignedShort</code></a>
                            or array of
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedShort"><code>unsignedShort</code></a>
                            <p>
                                (see the
                                <a href="https://www.iana.org/assignments/core-parameters/#content-formats">CoAP Content-Formats</a>
                                registry for the set of possible values)
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>coap:accept</code></td>
                        <td>Indicates that a CoAP Accept option [[RFC7252]] with one of the specified formats be included in the request</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedShort"><code>unsignedShort</code></a>
                            or array of
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedShort"><code>unsignedShort</code></a>
                            <p>
                                (see the
                                <a href="https://www.iana.org/assignments/core-parameters/#content-formats">CoAP Content-Formats</a>
                                registry for the set of possible values)
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>coap:blockwise</code></td>
                        <td>Indicates that a block-wise transfer [[RFC7959]] is supported</td>
                        <td>optional</td>
                        <td><a href="#BlockWiseTransferParameters">BlockWiseTransferParameters</a></td>
                    </tr>
                    <tr>
                        <td><code>coap:quickblockwise</code></td>
                        <td>Indicates that a quick block-wise transfer [[RFC9177]] is supported</td>
                        <td>optional</td>
                        <td><a href="#BlockWiseTransferParameters">QuickBlockWiseTransferParameters</a></td>
                    </tr>
                    <tr>
                        <td><code>coap:hopLimit</code></td>
                        <td>Indicates that a CoAP Hop-Limit option [[RFC8768]] be included in the request</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#unsignedByte"><code>unsignedByte</code></a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="BlockWiseTransferParameters">
            <h3>BlockWiseTransferParameters</h3>
            <table class="def">
                <thead>
                    <tr>
                        <th>Vocabulary term</th>
                        <th>Description</th>
                        <th>Assignment</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>coap:block2SZX</code></td>
                        <td>Indicates the largest block size that may be used in a Block2 Option</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a>
                            <p>(one of <code>16</code>, <code>32</code>, <code>64</code>, <code>128</code>, <code>256</code>, <code>512</code>, <code>1024</code>)</p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>coap:block1SZX</code></td>
                        <td>Indicates the largest block size that may be used in a Block1 Option</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a>
                            <p>(one of <code>16</code>, <code>32</code>, <code>64</code>, <code>128</code>, <code>256</code>, <code>512</code>, <code>1024</code>)</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="QuickBlockWiseTransferParameters">
            <h3>QuickBlockWiseTransferParameters</h3>
            <table class="def">
                <thead>
                    <tr>
                        <th>Vocabulary term</th>
                        <th>Description</th>
                        <th>Assignment</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>coap:qblock2SZX</code></td>
                        <td>Indicates the largest block size that may be used in a Q-Block2 Option</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a>
                            <p>(one of <code>16</code>, <code>32</code>, <code>64</code>, <code>128</code>, <code>256</code>, <code>512</code>, <code>1024</code>)</p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>coap:qblock1SZX</code></td>
                        <td>Indicates the largest block size that may be used in a Q-Block1 Option</td>
                        <td>optional</td>
                        <td>
                            <a href="https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#integer"><code>integer</code></a>
                            <p>(one of <code>16</code>, <code>32</code>, <code>64</code>, <code>128</code>, <code>256</code>, <code>512</code>, <code>1024</code>)</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </section>
    <section id="mappings">
        <h2>Mappings</h2>
        <p>
            This section describes the strategies and default values to use
            protocol specific concepts within the
            <a href="https://w3c.github.io/wot-architecture/#dfn-interaction-model">WoT Interaction model</a>.
        </p>
        <section id="default-mappings">
            <h3>Default mappings</h3>
            <table class="def">
                <thead>
                    <tr>
                        <th>Operation</th>
                        <th>Default Binding</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>readproperty</code></td>
                        <td><code>"coap:method": "GET"</code></td>
                    </tr>
                    <tr>
                        <td><code>writeproperty</code></td>
                        <td><code>"coap:method": "PUT"</code></td>
                    </tr>
                    <tr>
                        <td><code>observeproperty</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>unobserveproperty</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>readmultipleproperties</code></td>
                        <td><code>"coap:method": "GET"</code></td>
                    </tr>
                    <tr>
                        <td><code>writemultipleproperties</code></td>
                        <td><code>"coap:method": "PUT"</code></td>
                    </tr>
                    <tr>
                        <td><code>readallproperties</code></td>
                        <td><code>"coap:method": "GET"</code></td>
                    </tr>
                    <tr>
                        <td><code>writeallproperties</code></td>
                        <td><code>"coap:method": "PUT"</code></td>
                    </tr>
                    <tr>
                        <td><code>observeallproperties</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>unobserveallproperties</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>invokeaction</code></td>
                        <td><code>"coap:method": "POST"</code></td>
                    </tr>
                    <tr>
                        <td><code>queryaction</code></td>
                        <td><code>"coap:method": "GET"</code></td>
                    </tr>
                    <tr>
                        <td><code>cancelaction</code></td>
                        <td><code>"coap:method": "POST"</code></td>
                    </tr>
                    <tr>
                        <td><code>queryallactions</code></td>
                        <td><code>"coap:method": "GET"</code></td>
                    </tr>
                    <tr>
                        <td><code>subscribeevent</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>unsubscribeevent</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>subscribeallevents</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                    <tr>
                        <td><code>unsubscribeallevents</code></td>
                        <td><code>"coap:method": "GET"</code>, <code>"subprotocol": "coap:observe"</code></td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="possible-mappings">
            <h3>Possible mappings</h3>
            <p class="ednote">TODO: This section should describe other mappings that can be used by TD designers. It is meant to be informative but it provides guidelines for implementers.</p>
        </section>
    </section>
    <section>
        <h2>Examples</h2>
        <p class="ednote">TODO: Provide a compressive list of examples about how this binding template can be used within forms or Thing Descriptions </p>
    </section>
</body>

</html>